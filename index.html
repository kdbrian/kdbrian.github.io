<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brian Kidiga | Backend Developer Portfolio</title>
    <!-- Load Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Font Awesome for social media icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" src="style.css">
</head>
<body class="bg-gray-200 text-slate-800">

    <!-- Mobile Navigation Drawer Overlay -->
    <div id="mobile-nav-drawer" class="fixed top-0 left-0 w-64 h-full bg-white shadow-2xl z-50 p-6 lg:hidden">
        <button id="close-menu" class="absolute top-4 right-4 text-2xl text-slate-700 hover:text-sky-700">
            <i class="fas fa-times"></i>
        </button>
        <div class="space-y-12 pt-8">
            <div class="space-y-1">
                <h1 class="text-3xl font-extrabold tracking-tight text-slate-900">BRIAN K.</h1>
                <div class="text-sm font-medium text-sky-700">
                    <span id="tagline-text-drawer"></span>
                </div>
            </div>
            
            <nav class="space-y-4" id="mobile-nav-links">
                <h2 class="text-lg font-bold text-slate-700 uppercase tracking-wider mb-4">Navigation</h2>
                <a href="#" data-section="about" class="mobile-nav-link nav-link block text-lg font-medium text-slate-600 hover:text-sky-700 transition duration-150 py-2">About Me</a>
                <a href="#" data-section="skills" class="mobile-nav-link nav-link block text-lg font-medium text-slate-600 hover:text-sky-700 transition duration-150 py-2">Skills & Tech Stack</a>
                <a href="#" data-section="experience" class="mobile-nav-link nav-link block text-lg font-medium text-slate-600 hover:text-sky-700 transition duration-150 py-2">Experience</a>
                <a href="#" data-section="projects" class="mobile-nav-link nav-link block text-lg font-medium text-slate-600 hover:text-sky-700 transition duration-150 py-2">Projects</a>
                <a href="#" data-section="education" class="mobile-nav-link nav-link block text-lg font-medium text-slate-600 hover:text-sky-700 transition duration-150 py-2">Education</a>
            </nav>
        </div>
    </div>
    <!-- Overlay backdrop for mobile menu -->
    <div id="mobile-overlay-backdrop" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden lg:hidden"></div>

    <!-- The three-column grid structure for desktop -->
    <div id="app-container" class="lg:grid lg:grid-cols-[20rem_1fr_18rem] min-h-screen">
        
        <!-- ============================================== -->
        <!-- LEFT PANEL: Navigation and Personal Info (FIXED, Square, Elevated) -->
        <!-- ============================================== -->
        <header class="hidden lg:block p-8 bg-white shadow-xl h-screen sticky top-0 overflow-y-auto z-10">
            <div class="space-y-12">
                <div class="space-y-1">
                    <h1 class="text-4xl font-extrabold tracking-tight text-slate-900">BRIAN KIDIGA</h1>
                    <div class="text-sm font-medium text-sky-700 h-6">
                        <span id="tagline-text-desktop"></span>
                        <br>
                        <span>ريّان</span>
                    </div>
                </div>

                <!-- Desktop Navigation -->
                <nav class="space-y-4 pl-4" id="main-nav">
                    <h2 class="text-lg font-bold text-slate-700 uppercase tracking-wider mb-4">Navigation</h2>
                    
                    <!-- Navigation Links with data-section attribute for SPA logic -->
                    <a href="#" data-section="about" class="desktop-nav-link nav-link block text-lg font-medium text-slate-600 hover:text-sky-700 transition duration-150 py-2 border-r-4 border-transparent pr-4 active-link">
                        About Me
                    </a>
                    <a href="#" data-section="skills" class="desktop-nav-link nav-link block text-lg font-medium text-slate-600 hover:text-sky-700 transition duration-150 py-2 border-r-4 border-transparent pr-4">
                        Skills & Tech Stack
                    </a>
                    <a href="#" data-section="experience" class="desktop-nav-link nav-link block text-lg font-medium text-slate-600 hover:text-sky-700 transition duration-150 py-2 border-r-4 border-transparent pr-4">
                        Experience
                    </a>
                    <a href="#" data-section="projects" class="desktop-nav-link nav-link block text-lg font-medium text-slate-600 hover:text-sky-700 transition duration-150 py-2 border-r-4 border-transparent pr-4">
                        Projects
                    </a>
                    <a href="#" data-section="education" class="desktop-nav-link nav-link block text-lg font-medium text-slate-600 hover:text-sky-700 transition duration-150 py-2 border-r-4 border-transparent pr-4">
                        Education
                    </a>
                </nav>

                <!-- Project Panel Highlight (Muted color) -->
                <div class="p-4 bg-sky-50 border-l-4 border-sky-700">
                    <h3 class="text-sm font-semibold text-sky-800">Featured Project</h3>
                    <a href="#" data-project-id="menus" class="featured-project-link text-lg font-bold text-sky-900 hover:underline">Menus</a>
                </div>
            </div>
        </header>


        <!-- ============================================== -->
        <!-- CENTER PANEL: Primary Content (SCROLLABLE, FLAT) -->
        <!-- ============================================== -->
        <main class="lg:col-span-1 p-4 sm:p-8 lg:p-12 overflow-y-auto space-y-12">

            <!-- Mobile Header (Visible on small screens) -->
            <div class="lg:hidden p-4 bg-white shadow-md mb-8 sticky top-0 z-30 flex justify-between items-center">
                <div class="flex flex-col">
                    <h1 class="text-xl font-extrabold tracking-tight text-slate-900">BRIAN KIDIGA</h1>
                    <div class="text-xs font-medium text-sky-700 h-4">
                        <span id="tagline-text-mobile"></span>
                    </div>
                </div>
                 <button id="open-menu" class="text-2xl text-slate-700 hover:text-sky-700 p-2">
                    <i class="fas fa-bars"></i>
                </button>
            </div>

            <!-- ABOUT ME / DARK SUMMARY BOX -->
            <section id="about" class="portfolio-section active">
                <!-- Main summary box -->
                <div class="bg-slate-800 p-6 sm:p-8 lg:p-10 text-white space-y-4 shadow-sm rounded-sm">
                    <!-- <h2 class="text-2xl font-bold tracking-tight text-sky-400">About Me</h2> -->
                    <p class="text-slate-300 leading-relaxed">
                        As a Computer Science graduate, I am passionate about crafting robust and user-friendly applications and building efficient solutions. My experience spans from Android app development with 3<sup>rd</sup>-party integrations, to getting insights from data that drive businesses. Experimenting with data has been a norm for me; actively digging for information.
                    </p>
                </div>

                <!-- Article Links List (Visible only when About Me is active) -->
                <div class="bg-white p-6 sm:p-8 mt-6 shadow-sm">
                    <h3 class="text-xl font-bold mb-4 text-slate-900 border-b pb-2 border-gray-200">Recent Articles</h3>
                    <ul class="space-y-3">
                        <li>
                            <a href="https://medium.com/@briankidiga.dev/securing-a-spring-boot-application-3b62e2d48aa6" target="_blank" class="text-sky-700 hover:text-sky-900 font-medium transition block">
                                <i class="fas fa-link text-sm mr-2"></i> Securing a Spring boot Application
                            </a>
                            <p class="text-sm text-slate-500 ml-5">A dive into Spring Security.</p>
                        </li>
                        <li>
                            <a href="https://medium.com/@briankidiga.dev/what-is-a-view-model-really-41eae882c830" target="_blank" class="text-sky-700 hover:text-sky-900 font-medium transition block">
                                <i class="fas fa-link text-sm mr-2"></i> Activity Lifecycle and View Models
                            </a>
                            <p class="text-sm text-slate-500 ml-5">Exploring cold starts and cost efficiency in serverless architectures.</p>
                        </li>
                        <li>
                            <a href="https://medium.com/@briankidiga.dev/how-i-design-and-implement-android-applications-9404024660b1" target="_blank" class="text-sky-700 hover:text-sky-900 font-medium transition block">
                                <i class="fas fa-link text-sm mr-2"></i> Android Development for Kids
                            </a>
                            <p class="text-sm text-slate-500 ml-5">How to architect apps.</p>
                        </li>
                    </ul>
                </div>
            </section>
            
            <!-- ============================================== -->
            <!-- SKILLS SECTION -->
            <!-- ============================================== -->
            <section id="skills" class="portfolio-section bg-white p-6 sm:p-8 shadow-sm">
                <h2 class="text-2xl font-bold mb-6 text-slate-900">Skills</h2>
                <div class="space-y-6">
                    <div class="border-b pb-4 border-gray-100">
                        <h3 class="text-lg font-semibold text-slate-700 mb-2">Development & APIs</h3>
                        <div class="flex flex-wrap gap-2">
                            <span class="badge">Android Development (Java/Kotlin)</span>
                            <span class="badge">Rest API</span>
                            <span class="badge">GraphQL</span>
                            <span class="badge">React Native/Flutter (Cross platform)</span>
                            <span class="badge">GoLang</span>
                            <span class="badge">Android Development (Java/Kotlin)</span>
                            <span class="badge">Rest API</span>
                            <span class="badge">GraphQL</span>
                            <span class="badge">Spring boot</span>
                            <span class="badge">Node JS</span>
                            <span class="badge">Elastic Search</span>
                            <span class="badge">Docker & Containerization</span>
                        
                        
                        </div>
                    </div>
                    <div class="border-b pb-4 border-gray-100">
                        <h3 class="text-lg font-semibold text-slate-700 mb-2">Databases</h3>
                        <div class="flex flex-wrap gap-2">
                            <span class="badge">SQLite</span>
                            <span class="badge">SQL & No SQL</span>
                            <span class="badge">Worked with Vector(RedisV)</span>
                            <span class="badge">Redis</span>
                            <span class="badge">Elastic Stack</span>
                        </div>
                    </div>
                    <div class="border-b pb-4 border-gray-100">
                        <h3 class="text-lg font-semibold text-slate-700 mb-2">Tools & Version Control</h3>
                        <div class="flex flex-wrap gap-2">
                            <span class="badge">PostMan/Insomnia/httpie</span>
                            <span class="badge">Version Control (Git/Gitlab/Github)</span>
                            <span class="badge">CI/CD</span>
                            <span class="badge" title="https://www.google.com/url?sa=t&source=web&rct=j&opi=89978449&url=https://github.com/MobSF/Mobile-Security-Framework-MobSF">MobsF</span>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold text-slate-700 mb-2">Languages</h3>
                        <div class="flex flex-wrap gap-2">
                            <span class="badge">English<em>(preferred)</em>: Fluent</span>
                            <span class="badge">Swahili: Fluent</span>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- ============================================== -->
            <!-- EXPERIENCE SECTION -->
            <!-- ============================================== -->
            <section id="experience" class="portfolio-section bg-white p-6 sm:p-8 shadow-sm">
                <h2 class="text-2xl font-bold mb-6 text-slate-900">Experience & Projects</h2>
                
                <div class="space-y-6 border-l-2 border-sky-200 pl-4">
                
                    <div class="relative pb-6">
                        <h3 class="text-xl font-semibold text-slate-900">Developer Contractor</h3>
                        <p class="text-sm text-slate-500 period mb-3">2024-current</p>
                        <ul class="list-disc ml-5 space-y-1 text-slate-700">
                            <li>
                                Worked with a team of developers to completed various software projects involving
                                mobile application development. Deliver solutions with Kotlin and Jetpack compose.
                                With close dependency on tools like firebase and supabase.
                            </li>

                            <li>
                                Automated major repititive tasks like slack notifications, release automation and release notes generation
                                through carefull integration with github workflows. Improving delivery times and feedback loop.
                            </li>
                        </ul>
                    </div>
                </div>


                <div class="space-y-6 border-l-2 border-sky-200 pl-4">
                
                    <div class="relative pb-6">
                        <h3 class="text-xl font-semibold text-slate-900">Android Developer Intern (Graph Tech)</h3>
                        <p class="text-sm text-slate-500 period mb-3">2023-2024</p>
                        <ul class="list-disc ml-5 space-y-1 text-slate-700">
                            <li>I worked under senior developers and part of a great team.</li>
                            <li>Practised clean code by integrating a currency conversion feature to allow clients to easily make payments from different zones.</li>
                            <li>Optimized Rtl support to work inline with multilingual support for views systems.</li>
                            <li>Before being onboarded as an intern I was attached at Graph Tech to complete the campus attachment programme. Building upon my development knowledge and helping me standout.</li>
                        </ul>
                    </div>
                </div>



            </section>

            <!-- ============================================== -->
            <!-- PROJECTS SECTION (New Collapsible Logic) -->
            <!-- ============================================== -->
            <section id="projects" class="portfolio-section bg-white p-6 sm:p-8 shadow-sm">
                <h2 class="text-2xl font-bold mb-6 text-slate-900">Projects</h2>
                <p class="text-slate-600 mb-8">All my projects are available from my Github profile.</p>

                <div class="space-y-4" id="project-list">
                    
                    <!-- Menus Project -->
                    <div class="project-item border-b border-gray-100 p-4 transition-all duration-300 ease-in-out" data-project-id="menus">
                        <div class="project-header cursor-pointer flex justify-between items-center py-2" onclick="toggleProject('menus')">
                            <h3 class="text-xl font-semibold text-slate-900 hover:text-sky-700 transition">Menus</h3>
                            <i class="fas fa-chevron-down text-slate-500 arrow transition-transform duration-300"></i>
                        </div>
                        
                        <div class="project-summary text-slate-600 mb-2">
                             An online application aimed to streamline restaurant sales by integration with famous social media apps for marketing.
                        </div>

                        <div class="project-content-body">
                            <!-- Detailed content visible on expand -->
                            <div class="mt-4">
                                <h4 class="text-lg font-medium text-slate-700 mb-2">Project Details</h4>
                                <p class="text-slate-600 mb-4">
                                    Menus is a full-stack application designed to accelerate online sales for restaurants by integrating social media marketing tools and providing an interactive ordering experience.
                                </p>
                                <!-- <div class="carousel-container relative border border-gray-300">
                                    <div class="carousel flex overflow-hidden relative" data-project="menus">
                                        <img src="https://placehold.co/400x200/538d9d/ffffff?text=Menus+App+Screen+1" alt="Menus App Screenshot 1" class="h-64 w-full object-cover flex-shrink-0 transition-transform duration-500 ease-in-out" style="transform: translateX(0%);" onerror="this.onerror=null; this.src='https://placehold.co/400x200/538d9d/ffffff?text=Menus+App+Screen+1'">
                                        <img src="https://placehold.co/400x200/7db8ca/ffffff?text=Menus+App+Screen+2" alt="Menus App Screenshot 2" class="h-64 w-full object-cover flex-shrink-0 transition-transform duration-500 ease-in-out">
                                    </div>
                                    <button class="prev absolute top-1/2 -translate-y-1/2 left-2 bg-slate-900 bg-opacity-50 text-white p-2 hover:bg-opacity-80 transition" onclick="moveSlide('menus', -1, event)">&#10094;</button>
                                    <button class="next absolute top-1/2 -translate-y-1/2 right-2 bg-slate-900 bg-opacity-50 text-white p-2 hover:bg-opacity-80 transition" onclick="moveSlide('menus', 1, event)">&#10095;</button>
                                </div> -->
                            </div>
                        </div>
                    </div>

                    <!-- Sage Project -->
                    <div class="project-item border-b border-gray-100 p-4 transition-all duration-300 ease-in-out" data-project-id="sage">
                        <div class="project-header cursor-pointer flex justify-between items-center py-2" onclick="toggleProject('sage')">
                            <h3 class="text-xl font-semibold text-slate-900 hover:text-sky-700 transition">Sage</h3>
                            <i class="fas fa-chevron-down text-slate-500 arrow transition-transform duration-300"></i>
                        </div>

                        <div class="project-summary text-slate-600 mb-2">
                             A document repository that allows for online document sharing and interaction without reading the whole document.
                        </div>

                        <div class="project-content-body">
                            <!-- Detailed content visible on expand -->
                            <div class="mt-4">
                                <h4 class="text-lg font-medium text-slate-700 mb-2">Project Details</h4>
                                <p class="text-slate-600 mb-4">
                                    Sage is a repository leveraging search and indexing technologies (Elastic Search) to allow users to quickly find and interact with documents, getting key insights without needing to read the full text.
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Tow Project -->
                    <div class="project-item p-4 transition-all duration-300 ease-in-out" data-project-id="tow">
                        <div class="project-header cursor-pointer flex justify-between items-center py-2" onclick="toggleProject('tow')">
                            <h3 class="text-xl font-semibold text-slate-900 hover:text-sky-700 transition">Tow</h3>
                            <i class="fas fa-chevron-down text-slate-500 arrow transition-transform duration-300"></i>
                        </div>

                        <div class="project-summary text-slate-600 mb-2">
                             An online application used as a toolkit for drivers and travelers to find nearby services.
                        </div>

                        <div class="project-content-body">
                            <!-- Detailed content visible on expand -->
                            <div class="mt-4">
                                <h4 class="text-lg font-medium text-slate-700 mb-2">Project Details</h4>
                                <p class="text-slate-600 mb-4">
                                    Tow is a mobile-first application (Android) that helps drivers and EV owners quickly locate the closest tow trucks, mechanic services, and rest areas/eateries in an emergency.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- ============================================== -->
            <!-- EDUCATION SECTION -->
            <!-- ============================================== -->
            <section id="education" class="portfolio-section bg-white p-6 sm:p-8 shadow-sm">
                <h2 class="text-2xl font-bold mb-4 text-slate-900">Education</h2>
                <ul class="list-disc ml-5 space-y-2 text-slate-700">
                    <li><strong class="font-semibold text-sky-700">BSc. Computer Science</strong> - Graduated with honors.</li>
                    <li>Completed Relevant Coursework & Projects conferred a Cs Degree.</li>
                </ul>
            </section>
            
        </main>
        
        <!-- ============================================== -->
        <!-- RIGHT PANEL: Fixed Media/Contact (FIXED, Square, Elevated) -->
        <!-- ============================================== -->
        <aside class="hidden lg:block p-8 shadow-sm h-screen sticky top-0 space-y-8 z-10">
            
            <!-- Image Placeholder (Circular) -->
            <div class="flex justify-center">
                <!-- Added profile-img class for circular styling -->
                <img src="./uppy/user_profile.jpg" alt="Brian Kidiga Profile" class="profile-img" onerror="this.onerror=null; this.src='https://placehold.co/160x160/D4D4D8/475569?text=BK'">
            </div>
            
            <!-- Contact/Email (Icon instead of text) -->
            <div class="p-4 bg-sky-50 border border-sky-200 text-center">
                <h3 class="text-lg font-bold text-sky-700 mb-3">Get in Touch</h3>
                
                <a href="mailto:briankidiga.dev@email.com" class="inline-flex items-center justify-center p-3 text-3xl" title="Email Brian">
                    <i class="fas fa-paper-plane"></i>
                </a>
                
                <a class="inline-flex items-center justify-center p-3 text-3xl text-pink-700 transition duration-150" title="Anywhere">
                    <i class="fa-solid fa-globe"></i>
                </a>
            </div>

            <!-- Social Links (Square, Muted) -->
            <div class="space-y-4">
                <h3 class="text-lg font-bold text-slate-700">Social</h3>
                <div class="grid grid-cols-2 gap-2">
                    <!-- GitHub (Square button, muted blue color) -->
                    <a href="https://github.com/kdbrian" target="_blank" class="p-3 bg-slate-700 hover:bg-slate-800 text-white flex items-center justify-center shadow-md transition duration-150 rounded-xl">
                        <i class="fab fa-github mr-2"></i> GitHub
                    </a>

                    <!-- Medium (Square button, muted blue color) -->
                    <a href="https://medium.com/@briankidiga.dev" target="_blank" class="p-3 bg-sky-700 hover:bg-sky-800 text-white flex items-center justify-center shadow-md transition duration-150">
                        <i class="fab fa-medium mr-2"></i> Medium
                    </a>
                    
                    <!-- LinkedIn (Square button, muted blue color) -->
                    <a href="https://www.linkedin.com/in/brian-kidiga/" target="_blank" class="p-3 bg-sky-700 hover:bg-sky-800 text-white flex items-center justify-center shadow-md transition duration-150">
                        <i class="fab fa-linkedin mr-2"></i> LinkedIn
                    </a>
                    
                    <!-- LinkedIn (Square button, muted blue color) -->
                    <a href="#" target="_blank" class="p-3 bg-sky-700 hover:bg-pink-800 text-white flex items-center justify-center shadow-md transition duration-150 rounded-xl">
                        <i class="fa-solid fa-ethernet mr-2"></i> 
                        <!-- <i class="fab fa-linkedin mr-2"></i>  -->
                    </a>
                </div>
            </div>
            
            
        </aside>
    </div>

    <!-- ============================================== -->
    <!-- JavaScript Logic -->
    <!-- ============================================== -->
    <script>
        // Store the ID of the currently active section
        let activeSectionId = 'about'; 
        let expandedProjectId = null; // Track the currently expanded project

        document.addEventListener('DOMContentLoaded', () => {
            
            // --- 1. Tagline Typing Effect ---
            const taglines = [
                "Computer","Science", 
            ];
            let tagIndex = 0;
            let charIndex = 0;
            let isDeleting = false;
            let delay = 100;

            const taglineElements = document.querySelectorAll('#tagline-text-desktop, #tagline-text-mobile, #tagline-text-drawer');

            function typeTagline() {
                const currentTag = taglines[tagIndex];
                const displayTag = currentTag.substring(0, charIndex);

                taglineElements.forEach(el => el.textContent = displayTag);

                if (!isDeleting) {
                    // Typing forward
                    charIndex++;
                    if (charIndex > currentTag.length) {
                        isDeleting = true;
                        delay = 2000; // Pause at end of sentence
                    } else {
                        delay = 75;
                    }
                } else {
                    // Deleting
                    charIndex--;
                    if (charIndex < 0) {
                        isDeleting = false;
                        tagIndex = (tagIndex + 1) % taglines.length;
                        delay = 500; // Pause before starting next sentence
                    } else {
                        delay = 30;
                    }
                }

                setTimeout(typeTagline, delay);
            }

            typeTagline();

            // --- 2. SPA Navigation Logic (Show/Hide Sections) ---
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('.portfolio-section');
            const mainContent = document.querySelector('main');
            const mobileDrawer = document.getElementById('mobile-nav-drawer');
            const mobileBackdrop = document.getElementById('mobile-overlay-backdrop');

            function setActiveSection(sectionId) {
                activeSectionId = sectionId;

                // 1. Update content visibility
                sections.forEach(section => {
                    if (section.id === sectionId) {
                        section.classList.add('active');
                    } else {
                        section.classList.remove('active');
                    }
                });

                // 2. Update navigation link styling (Desktop)
                document.querySelectorAll('.desktop-nav-link').forEach(link => {
                    link.classList.remove('font-bold', 'text-sky-700', 'border-sky-700');
                    link.classList.add('font-medium', 'text-slate-600', 'border-transparent');
                    
                    if (link.getAttribute('data-section') === sectionId) {
                        link.classList.add('font-bold', 'text-sky-700', 'border-sky-700');
                        link.classList.remove('font-medium', 'text-slate-600', 'border-transparent');
                    }
                });
                
                // 3. Update navigation link styling (Mobile Drawer)
                document.querySelectorAll('.mobile-nav-link').forEach(link => {
                    link.classList.remove('font-bold', 'text-sky-700');
                    link.classList.add('font-medium', 'text-slate-600');
                    
                    if (link.getAttribute('data-section') === sectionId) {
                        link.classList.add('font-bold', 'text-sky-700');
                        link.classList.remove('font-medium', 'text-slate-600');
                    }
                });


                // 4. Scroll to the top of the main content area
                if (mainContent) {
                     mainContent.scrollTop = 0;
                }
            }
            
            // Mobile menu togglers
            document.getElementById('open-menu').addEventListener('click', () => {
                mobileDrawer.classList.add('open');
                mobileBackdrop.classList.remove('hidden');
            });

            document.getElementById('close-menu').addEventListener('click', () => {
                mobileDrawer.classList.remove('open');
                mobileBackdrop.classList.add('hidden');
            });
            
            mobileBackdrop.addEventListener('click', () => {
                mobileDrawer.classList.remove('open');
                mobileBackdrop.classList.add('hidden');
            });

            // Attach click listeners to navigation links
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault(); // Prevent default hash behavior
                    const sectionId = link.getAttribute('data-section');
                    setActiveSection(sectionId);
                    
                    // Close mobile menu if clicked from drawer
                    if (link.classList.contains('mobile-nav-link')) {
                        mobileDrawer.classList.remove('open');
                        mobileBackdrop.classList.add('hidden');
                    }
                });
            });
            
            // Handle clicking the featured project link
            document.querySelectorAll('.featured-project-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const projectId = link.getAttribute('data-project-id');
                    setActiveSection('projects'); // Ensure project section is visible
                    setTimeout(() => toggleProject(projectId, true), 50); // Small delay to allow section to show
                });
            });

            // Set initial active state based on default 'about'
            setActiveSection(activeSectionId);


            // --- 3. Project Collapse/Expansion Logic ---
            window.toggleProject = (projectId, forceExpand = false) => {
                const allProjectItems = document.querySelectorAll('.project-item');

                // If clicking an already expanded project, collapse it unless forced to expand
                if (expandedProjectId === projectId && !forceExpand) {
                    expandedProjectId = null;
                } else {
                    expandedProjectId = projectId;
                }

                allProjectItems.forEach(item => {
                    const id = item.getAttribute('data-project-id');
                    const contentBody = item.querySelector('.project-content-body');
                    const arrow = item.querySelector('.arrow');
                    
                    if (id === expandedProjectId) {
                        // Expand the target project
                        item.classList.add('expanded');
                        contentBody.classList.add('expanded');
                        arrow.classList.add('rotate');
                        item.scrollIntoView({ behavior: 'smooth', block: 'start' });

                    } else {
                        // Collapse all other projects
                        item.classList.remove('expanded');
                        contentBody.classList.remove('expanded');
                        arrow.classList.remove('rotate');
                    }
                });
            };

            // --- 4. Carousel Logic (Prevent click propagation during slide) ---
            window.moveSlide = (projectId, direction, event) => {
                event.stopPropagation(); // Stop click from propagating up to the project header
                const carousel = document.querySelector(`.carousel[data-project="${projectId}"]`);
                if (!carousel) return;

                const slides = Array.from(carousel.children);
                const totalSlides = slides.length;

                // Find the index of the currently visible slide (via inline style transform: translateX)
                let currentIndex = 0;
                const firstSlideTransform = carousel.children[0].style.transform;
                if (firstSlideTransform) {
                    const match = firstSlideTransform.match(/translateX\((-?\d+)%\)/);
                    if (match) {
                        currentIndex = Math.abs(parseInt(match[1]) / 100);
                    }
                }
                
                let newIndex = (currentIndex + direction + totalSlides) % totalSlides;
                
                // Update the transform style for ALL slides based on the new index
                const newTransformValue = `translateX(-${newIndex * 100}%)`;
                
                slides.forEach(slide => {
                    slide.style.transform = newTransformValue;
                });
            };
        });
    </script>
</body>
</html>
